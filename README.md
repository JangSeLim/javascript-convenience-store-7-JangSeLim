# javascript-convenience-store-precourse

## W 편의점 결제 시스템
- W 편의점 결제 시스템은 고객의 할인 혜택과 재고 상황을 고려하여 최종 결제 금액을 계산하고 안내하는 시스템
- 사용자가 입력한 상품의 가격과 수량을 기반으로 프로모션 및 멤버십 할인 정책을 반영해 최종 결제 금액을 산출
- 구매 내역과 산출한 금액 정보는 영수증으로 출력되며, 영수증 출력 후 추가 구매 여부를 선택할 수 있음

---

## 기능 목록

### 1. 상품 목록 출력
1. 환영 인사 출력
2. 상품명, 가격, 프로모션 이름, 재고를 출력합니다.
   - `products.md`에서 쉼표를 기준으로 `- {상품명} 가{격}원 {수량}개 {프로모션}` 형식으로 출력합니다.
   - 수량이 null인 경우 `재고 없음`으로 출력합니다.
        ```
        안녕하세요. W편의점입니다.
        현재 보유하고 있는 상품입니다.

        - 콜라 1,000원 10개 탄산2+1
        - 콜라 1,000원 10개
        - 사이다 1,000원 8개 탄산2+1
        - 사이다 1,000원 7개
        - 오렌지주스 1,800원 9개 MD추천상품
        - 오렌지주스 1,800원 재고 없음
        - 탄산수 1,200원 5개 탄산2+1
        - 탄산수 1,200원 재고 없음
        - 물 500원 10개
        - 비타민워터 1,500원 6개
        - 감자칩 1,500원 5개 반짝할인
        - 감자칩 1,500원 5개
        - 초코바 1,200원 5개 MD추천상품
        - 초코바 1,200원 5개
        - 에너지바 2,000원 5개
        - 정식도시락 6,400원 8개
        - 컵라면 1,700원 1개 MD추천상품
        - 컵라면 1,700원 10개
        ```


### 2. 구매할 상품과 수량을 입력 받기
1. 상품명과 수량을 하이픈(-)으로, 개별 상품은 대괄호([])로 묶어 쉼표(,)로 구분하여 입력 받습니다.
2. 상품과 수량을 객체로 저장합니다.
  ```
  구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
  
  [콜라-10],[사이다-3] // 입력 예시
  ```
3. 잘못된 값이 입력되었을 때 `[ERROR]`로 시작하는 오류 메시지와 함께 안내합니다.
- 구매 형식이 올바르지 않을 경우: `[ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.`
  - 상품과 수량은 적절하지만, 하이픈 대괄호 쉼표가 올바르지 않은 경우
- 존재하지 않는 상품을 입력한 경우: `[ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.`
- 구매 수량이 재고를 초과할 경우: `[ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.`
  - 상품과 수량이 잘못 입력된 경우
  - 수량이 없거나, 수량 부분에 숫자가 아닌 문자가 포함되거나, 수량이 음수거나, 수량이 잘못된 형식일 경우

### 3. 프로모션 할인
1. 상품의 맨 뒤에 `promotions.md`의 `name`이 있을 경우 프로모션 적용 가능 상품입니다.
2. `@woowacourse/mission-utils`의 `DateTimes.now()`를 활용하여 오늘 날짜를 가져옵니다.
3. 오늘 날짜가 `promotions.md`의 `start-date`와 `end-date` 사이일 경우 프로모션이 적용됩니다.
4. 프로모션 재고를 우선적으로 사용하며 부족할 경우 일반 재고를 사용합니다.
- `promotions.md`의 `get`은 증정
5. 고객이 프로모션 적용 상품 개수보다 적게 가져온 경우, 필요한 수량을 추가로 가져오면 혜택을 받을 수 있음 출력
- `Y`: 증정 받을 수 있는 상품을 추가
- `N`: 증정 받을 수 있는 상품을 추가하지 않음
    ```
    현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
    ```
6. 프로모션 재고 부족으로 일부 수량을 프로모션 없이 결제해야 하는 경우, 일부 수량에 대해 정가 결제 안내
- `Y`: 일부 수량에 대해 정가로 결제
- `N`: 정가로 결제해야하는 수량만큼 제외한 후 결제를 진행
    ```
    현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
    ```
7. 동일 상품에 여러 프로모션을 중복 적용하지 않습니다.

### 4. 멤버십 할인
1. 멤버십 할인 여부를 입력 받습니다.
- `Y`: 멤버십 할인을 적용합니다.
- `N`: 멤버십 할인을 적용하지 않습니다.
2. 프로모션 적용 후 남은 금액에 대해 30% 멤버십 할인을 적용하며, 최대 할인 한도는 8,000원입니다.
  ```
  멤버십 할인을 받으시겠습니까? (Y/N)
  ```

### 5. 영수증 출력
1. 영수증 항목
- **구매 상품 내역**: 상품명, 수량, 가격
- **증정 상품 내역**: 프로모션에 따라 무료로 제공된 증정 상품 목록
- **금액 정보**
  - 총구매액: 구매 상품의 총 금액
  - 행사할인: 프로모션에 의한 할인 금액
  - 멤버십할인: 멤버십에 의한 추가 할인 금액
  - 내실돈: 최종 결제 금액
2. 영수증의 각 항목을 정렬하여 출력
  ```
  ===========W 편의점=============
  상품명		수량	금액
  콜라		3 	3,000
  에너지바 		5 	10,000
  ===========증	정=============
  콜라		1
  ==============================
  총구매액		8	13,000
  행사할인			-1,000
  멤버십할인			-3,000
  내실돈			 9,000
  ```

### 6. 추가 구매
1. 추가 구매 여부를 확인합니다.
- `Y`: 추가 구매 진행 (업데이트된 상품 목록 출력)
- `N`: 종료
  ```
  감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
  ```
